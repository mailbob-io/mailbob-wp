import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(r={store:()=>e.store},n={},t.d(n,r),n),{actions:a,state:s}=(0,o.store)("mailbob/subscription",{actions:{formSubmit:async e=>{e.preventDefault();const t=e.target,o=new FormData(e.target);o.append("action","mailbob_block_subscribe"),o.append("nonce",s.nonce),o.append("postId",s.postId),Object.fromEntries(o.entries());const a=t.querySelector("button");t.querySelectorAll(".mailbob-message").forEach((e=>e.remove()));const r=a.textContent;a.textContent=s.loadingButtonText,a.disabled=!0;try{const t=await fetch(s.ajaxUrl,{method:"POST",credentials:"same-origin",body:o});if(!t.ok)throw new Error("Network response was not ok");const a=await t.text(),r=JSON.parse(a),n=document.createElement("div");n.classList.add("mailbob-message"),r.success?r.data.api?n.textContent=s.successMessage:(n.classList.add("mailbob-message--error"),n.textContent=r.data.message):(n.classList.add("mailbob-message--error"),n.textContent=s.errorMessage||r.data.message),e.target.appendChild(n)}catch(e){console.log("Error:",e)}finally{a.textContent=r,a.disabled=!1}}}});var r,n;